# TIL | 2025.03.29

## 📌 TIL 요약

### 알고리즘

-   정렬과 그리디 결정 알고리즘 10 ~ 12

### 소켓 적용

-   현재 작성한 로직 다시 한번 생각
-   예외처리 생각
    -   만약 소캣 연결이 실패했다면?
        -   어떻게 핸들링?
            -   응원하기만 사용 못하게 한다.
                -   그에대한 UI 는 어떻게 제공할지
                    -   버튼을 숨긴다
                    -   버튼에 문구를 제공하며 disabled처리한다
            -   서비스를 사용 못하게한다.
        -   어디서 핸들링?
            -   useSocketConnection에서?
            -   그럼 버튼에서는?

# 스마게

## ConfirmEmailPage 리팩토링 요약

### 기존 문제점

-   비즈니스 로직이 API 호출부 안에 섞여 있어 **역할 분리가 되지 않음**
-   여러 기능(로그인/회원가입/이메일 인증)을 **하나의 함수로 처리**하려 하면서, **관련 없는 로직도 함께 수행**
-   같은 API를 **중복 호출**하거나 불필요하게 연결된 구조
-   예외 처리 로직이 없어, 오류 발생 시 **사용자 피드백이 불가능**
-   로직 테스트가 어려워 유지보수성 및 확장성이 떨어짐

---

### 리팩토링 방향

#### 1. **로직 분리**

-   각 단계(API 호출)의 **비즈니스 로직을 컴포넌트 밖으로 분리**하여 테스트 가능하게 리팩토링
-   `postConfirmEmail`, `postSignIn`, `postLogin`, `postSignUp` 호출 흐름을 **명확히 분리**
-   반복되는 로직은 공통 유틸이나 훅으로 추상화

#### 2. **React Query 적용**

-   `useMutation`, `mutate`, `mutateAsync`의 역할을 명확히 구분하여 사용
    -   `mutate`: 콜백 중심 처리 (빠른 피드백)
    -   `mutateAsync`: async/await 문법과 어울려 **가독성 및 에러 처리 용이**

#### 3. **토큰 저장 로직 고민**

-   단순한 토큰 저장/초기화는 유틸 함수로 분리해야하나

---

### 고민 중인 부분

-   **회원가입/로그인 흐름 통합 여부**

    -   백엔드가 설계해둔 로직을 내가 바꾸긴 어려운상황 회원가입하고 로그인은 그냥 유저를 서버에 등록하냐 차이밖에 없기에 분리할 예정(근데 어떻게 이쁘게? 테스트 용이하게?)

-   **예외 처리 방향**

    -   모든 인증 단계(postConfirmEmail, postSignIn, postLogin, postSignUp) 중 하나라도 실패하면 전체 흐름 중단(3가지중 하나라도 안되면 어차피 서비스 사용 불가)
    -   실패 시 사용자에게 **toast 알림**을 띄우고, 안내 메시지 또는 “문의하기” 버튼 제공 고려 중

-   **로딩 처리 및 에러**
    -   전체적인 예외처리 부족
        -   로딩
        -   에러

---

# 패턴으로 익히고 설계로 완성하는 리액트

## ch4 리액트 컴포넌트 설계하기
